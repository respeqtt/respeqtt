<Page
    xmlns="http://schemas.nativescript.org/tns.xsd"
    xmlns:CheckBox="@nstudio/nativescript-checkbox" loaded="pageLoaded">

    <ActionBar title="RespeqTT">
        <StackLayout orientation="horizontal"
        ios:horizontalAlignment="center"
        android:horizontalAlignment="left">
            <Image src="res://icon" class="action-image" ></Image>
        </StackLayout>
    </ActionBar>
    <FlexboxLayout flexDirection="column" justifyContent="flex-start">
        <Label class="titre" text="RENCONTRE EN COURS" flexGrow="0" flexShrink="1"></Label>
        <Label class="sous-titre" [text]="this.titreRencontre" flexGrow="0" flexShrink="1"></Label>
        <FlexboxLayout flexDirection="row" justifyContent="space-between" flexGrow="0" flexShrink="1">
            <Label class = "switch-label" [text]="this.clubA" flexGrow="1" flexShrink="1"></Label>
            <Switch checked="false" (checkedChange)="onCheckedChange($event)"  flexGrow="0" flexShrink="0" [isenabled]="this.switchActif"></Switch>
            <Label class = "switch-label" [text]="this.clubX" flexGrow="1" flexShrink="1"></Label>
        </FlexboxLayout>
        <FlexboxLayout flexDirection="row" justifyContent="space-between" flexGrow="0" flexShrink="1" [visibility]="(this.modif ? 'visible' : 'collapsed')">
            <Button text="Composer équipe A"     flexShrink="1" flexGrow="1" backgroundColor="blue" [nsRouterLink]="['../compo/A']"></Button>
            <Button text="Composer équipe X"     flexShrink="1" flexGrow="1" backgroundColor="darkblue" [nsRouterLink]="['../compo/X']"></Button>
        </FlexboxLayout>
        <FlexboxLayout flexDirection="row" justifyContent="space-between" flexGrow="0" flexShrink="1" [visibility]="(this.modif ? 'collapsed' : 'visible')">
            <Button class="cartonJaune" min-width= "20" width= "20" flexGrow="0" flexShrink="0" horizontalAlignment="left"  (tap)="onJaune($event)"></Button>
            <Button text="Voir les cartons" min-width= "100" width= "200" flexGrow="1" flexShrink="1" horizontalAlignment="center"  (tap)="onVoirCartons($event)"></Button>
            <Button class="cartonRouge" min-width= "20" width= "20" flexGrow="0" flexShrink="0" horizontalAlignment="right" (tap)="onRouge($event)"></Button>
        </FlexboxLayout>
        <FlexboxLayout flexDirection="row" justifyContent="flex-start" flexGrow="0" flexShrink="0">
            <ListView class ="liste" [items]="listeEquipeA" (itemTap)="onJoueurATap($event)" flexGrow="0" flexShrink="1">
                <ng-template let-item="item" let-i="index" let-odd="odd" let-even="even">
                    <StackLayout orientation="vertical" height="20" [class.odd]="odd" [class.even]="even">
                        <Label [class.odd]="odd" [class.even]="even" [text]="item.nom + ' ' + item.prenom + ' ' + item.points">
                        </Label>
                    </StackLayout>
                </ng-template>
            </ListView>
            <ListView class ="liste" [items]="listeEquipeX" (itemTap)="onJoueurXTap($event)" flexGrow="0" flexShrink="1">
                <ng-template let-item="item" let-i="index" let-odd="odd" let-even="even">
                    <StackLayout orientation="vertical" height="20" [class.odd]="odd" [class.even]="even">
                        <Label [class.odd]="odd" [class.even]="even" [text]="item.nom + ' ' + item.prenom + ' ' + item.points">
                        </Label>
                    </StackLayout>
                </ng-template>
            </ListView>
        </FlexboxLayout>
        <FlexboxLayout height = "60" min-height = "60" flexDirection="row" flexGrow="0" flexShrink="1" justifyContent="space-between">
            <Label class="lieu" text="Lieu" flexGrow="0.2" flexShrink="1"></Label>
            <TextField class="lieu" hint="Lieu de la rencontre" flexGrow="1" flexShrink="1" secure="false" maxLength="20" [(ngModel)]='this.lieu'
                    [visibility]="(this.resValid ? 'visible' : 'collapse')" [isenabled]="this.resValid">
            </TextField>
        <TextView class="lieu" [text="this.lieu" flexGrow="1" flexShrink="1" secure="false" maxLength="20" [(ngModel)]='this.lieu'
                         [visibility]="(this.resValid ? 'collapse' : 'visible')">
            </TextView>
        </FlexboxLayout>
        <FlexboxLayout flexDirection="row" justifyContent="space-between" flexGrow="0" flexShrink="1">
            <Button [text]="this.btnResA" flexGrow="1" flexShrink="1" width= "1000" min-width="100" backgroundColor="blue" (tap)="onReserveA($event)"></Button>
            <Button [text]="this.btnResX" flexGrow="1" flexShrink="1" width= "1000" min-width="100" backgroundColor="blue" (tap)="onReserveX($event)"></Button>
        </FlexboxLayout>
        <FlexboxLayout flexDirection="row" justifyContent="space-between" flexGrow="0" flexShrink="1">
            <Button text="VALIDER" flexGrow="1" flexShrink="1" backgroundColor="darkblue" (tap)="onValiderFeuille($event)" [isenabled]="this.resValid"></Button>
            <Button text="FERMER"  flexGrow="1" flexShrink="1" backgroundColor="blue" (tap)="onFermer($event)"></Button>
        </FlexboxLayout>
    </FlexboxLayout>
</Page>
